{% extends "base.html" %}
{% block content %}
<h2>Logs</h2>
<div class="card p-3">
  {% if is_admin %}
    <p><strong>Admin Mode:</strong> Viewing all logs</p>
  {% else %}
    <p><strong>User Mode:</strong> Viewing only your activity</p>
  {% endif %}
  
  <table border="1">
    <thead>
      <tr>
        <th>S.No.</th>
        <th>Tracker ID</th>
        {% if is_admin %}<th>User ID</th>{% endif %}
        <th>IP Address</th>
        <th>User Agent</th>
        <th>Timestamp</th>
        <th>City</th>
        <th>Region</th>
        <th>Country</th>
        <th>Latitude</th>
        <th>Longitude</th>
      </tr>
    </thead>
    <tbody>
      {% for row in table_data %}
<tr>
  <td>{{ loop.revindex }}</td>
  <td>{{ row[1] }}</td>  {# doc_ref #}
  {% if is_admin %}<td>{{ row[2] }}</td>{% endif %}
  <td>{{ row[3] }}</td>  {# ip #}
  <td>{{ row[4] }}</td>  {# ua #}
  <td>{{ row[5] }}</td>  {# ts #}
  <td>{{ row[8] }}</td>  {# city #}
  <td>{{ row[9] }}</td>  {# region #}
  <td>{{ row[10] }}</td> {# country #}
  <td>{{ row[6] }}</td>  {# lat #}
  <td>{{ row[7] }}</td>  {# lon #}
</tr>
{% endfor %}

    </tbody>
  </table>
</div>
{% endblock %}
